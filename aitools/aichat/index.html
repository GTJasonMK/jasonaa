<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI聊天室 - 智能对话助手</title>
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="chat-container">
        <!-- 顶部导航栏 -->
        <header class="chat-header">
            <div class="header-left">
                <button class="btn-back" onclick="location.href='../../index.html'">← 返回</button>
                <h1>🤖 AI聊天室</h1>
            </div>
            <div class="header-right">
                <button class="btn-icon" id="toggleSettings" title="设置">⚙️</button>
                <button class="btn-icon" id="clearChat" title="清空对话">🗑️</button>
            </div>
        </header>

        <div class="chat-main">
            <!-- 左侧配置面板 -->
            <aside class="settings-panel" id="settingsPanel">
                <div class="settings-header">
                    <h3>⚙️ API配置</h3>
                </div>

                <div class="settings-body">
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="enableAI" checked>
                            启用AI对话
                        </label>
                    </div>

                    <div class="setting-group">
                        <label>API地址</label>
                        <input type="text" id="apiUrl" class="setting-input"
                               placeholder="https://api.example.com">
                        <small>New API base URL，会自动补全endpoint</small>
                    </div>

                    <div class="setting-group">
                        <label>API Key</label>
                        <input type="password" id="apiKey" class="setting-input"
                               placeholder="sk-xxxxx">
                    </div>

                    <div class="setting-group">
                        <label>模型</label>
                        <select id="modelSelect" class="setting-input">
                            <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                            <option value="gpt-4">GPT-4</option>
                            <option value="gpt-4-turbo">GPT-4 Turbo</option>
                            <option value="deepseek-chat">DeepSeek Chat</option>
                            <option value="deepseek-reasoner">DeepSeek Reasoner</option>
                            <option value="claude-3-sonnet-20240229">Claude 3 Sonnet</option>
                            <option value="custom">自定义</option>
                        </select>
                        <input type="text" id="customModel" class="setting-input"
                               placeholder="输入自定义模型名" style="display: none; margin-top: 10px;">
                    </div>

                    <div class="setting-group">
                        <label>System Prompt（可选）</label>
                        <textarea id="systemPrompt" class="setting-textarea" rows="3"
                                  placeholder="你是一个友好、专业的AI助手..."></textarea>
                        <small>留空使用默认提示词</small>
                    </div>

                    <div class="setting-group">
                        <label>Temperature: <span id="tempValue">0.7</span></label>
                        <input type="range" id="temperature" min="0" max="2" step="0.1" value="0.7" class="setting-slider">
                        <small>0 = 精确, 2 = 创造</small>
                    </div>

                    <div class="setting-group">
                        <label>Max Tokens: <span id="tokensValue">2000</span></label>
                        <input type="range" id="maxTokens" min="100" max="4000" step="100" value="2000" class="setting-slider">
                    </div>

                    <div class="setting-actions">
                        <button class="btn btn-primary" id="saveSettings">💾 保存配置</button>
                        <button class="btn btn-secondary" id="testConnection">🔗 测试连接</button>
                    </div>
                </div>
            </aside>

            <!-- 右侧聊天区域 -->
            <main class="chat-area">
                <!-- 消息列表 -->
                <div class="messages-container" id="messagesContainer">
                    <div class="welcome-message">
                        <h2>👋 欢迎使用AI聊天室</h2>
                        <p>这是一个轻量级的AI对话工具，支持各种OpenAI兼容的API</p>
                        <div class="quick-tips">
                            <h4>💡 快速开始：</h4>
                            <ul>
                                <li>点击左上角⚙️配置您的API信息</li>
                                <li>支持New API、OpenAI、DeepSeek等服务</li>
                                <li>只需填写base URL，系统会自动补全</li>
                                <li>对话历史自动保存到本地</li>
                                <li>支持多轮上下文对话</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- 输入区域 -->
                <div class="input-area">
                    <div class="input-wrapper">
                        <textarea id="messageInput" class="message-input"
                                  placeholder="输入消息...（Shift+Enter换行，Enter发送）"
                                  rows="1"></textarea>
                        <button class="btn-send" id="sendButton">
                            <span class="send-icon">📤</span>
                            <span class="send-text">发送</span>
                        </button>
                    </div>
                    <div class="input-status" id="inputStatus"></div>
                </div>
            </main>
        </div>
    </div>

    <!-- 加载脚本 -->
    <script src="../../js/settings-loader.js"></script>
    <script src="chat.js"></script>
</body>
</html>
