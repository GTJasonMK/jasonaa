# 30-个性化系统

> **文档版本**: v1.0
> **最后更新**: 2025-10-27
> **负责人**: 待定
> **优先级**: ⭐⭐⭐⭐ (MVP v1.5核心)
> **实现版本**: MVP v1.5

---

## 📋 相关文档

**前置依赖**:
- [11-桌宠AI与需求系统](../../10-核心系统/11-桌宠AI与需求系统.md) - AI决策基础

**相关文档**:
- [31-情感与记忆系统](./31-情感与记忆系统.md) - 性格演化
- [32-关系系统](./32-关系系统.md) - 个性影响关系

---

## 一、系统概述

### 1.1 设计理念

**问题**: 在MVP v1.0中,所有桌宠的行为模式基本相同,缺乏个体差异,玩家难以产生"这是我独一无二的伙伴"的感觉。

**解决方案**: 个性化系统通过**初始特质**和**后天性格演化**,让每个桌宠都成为独一无二的个体。

### 1.2 核心目标

1. **建立个体差异**: 不同桌宠有明显不同的行为模式
2. **增强情感投入**: 玩家认为"这是我的桌宠",而非"这是一个桌宠"
3. **提升可玩性**: 不同特质组合带来不同游戏体验
4. **保留平衡**: 特质有优劣但总体平衡,无绝对最优解

### 1.3 系统分层

**个性化系统分层结构**:

**初始特质系统** (出生时固定):
- 特质池: 8-10个可选特质
- 分配机制: 随机分配2-3个特质
- 影响范围: 同时影响数值和行为模式

**后天获得特性** (通过游戏进程解锁):
- 成就触发: 完成特定成就解锁特性
- 行为积累: 长期行为模式形成特性
- 特殊事件: 特殊事件触发解锁特性

---

## 二、初始特质系统 (MVP v1.5)

### 2.1 特质设计原则

**设计规则**:
1. 每个特质既有优点也有代价 (或限制)
2. 特质影响数值 + 影响AI行为模式
3. 特质之间可以有协同或冲突
4. 总体保持平衡,无"必选"特质

### 2.2 特质列表

#### 特质1: 早起者 🌅

**描述**: 早晨精力充沛,是一天中最有效率的时段

**数值影响**:
- 清晨(5:00-9:00): 工作效率 +30%
- 夜晚(20:00-24:00): 工作效率 -20%
- 入睡时间提前2小时 (22:00就想睡)

**行为影响**:
- AI决策倾向于早上安排重要工作 (种植、钓鱼)
- 晚上更倾向于休闲活动或早睡
- 如果被迫熬夜 (任务执行),第二天效率降低

**适合玩法**:
- 适合早上在线的玩家
- 适合注重效率的玩家

**对话风格**:
- "早安!新的一天开始了!"
- "晚上了...我有点困..."

---

#### 特质2: 夜猫子 🦉

**描述**: 夜晚才是活力时刻,白天总是昏昏欲睡

**数值影响**:
- 夜晚(20:00-2:00): 工作效率 +25%, 不降低快乐度
- 上午(6:00-10:00): 工作效率 -15%, 起床困难
- 睡眠时间延后3小时 (2:00才睡)

**行为影响**:
- 倾向于夜间工作,白天休息
- 早上可能赖床,错过早晨活动
- 夜间独自工作时快乐度不降低

**适合玩法**:
- 适合夜猫子玩家
- 提供不同的时间体验

**对话风格**:
- "夜晚真美...这才是我的时间"
- "这么早就起来...好困..."

**特殊交互**:
- 与"早起者"冲突 (不能同时拥有)
- 夜间可能触发特殊事件

---

#### 特质3: 美食家 🍽️

**描述**: 对食物有着超乎寻常的热爱和敏感

**数值影响**:
- 饥饿度降低速度 +20% (更容易饿)
- 从食物获得的饱腹度 +30%
- 从食物获得的快乐度 +40%
- 烹饪技能成长速度 +25%

**行为影响**:
- 更频繁进食,对食物种类更挑剔
- 优先学习烹饪技能
- 倾向于制作高级料理而非吃原料
- 会"品尝"食物 (特殊动画)

**适合玩法**:
- 增加烹饪系统的深度
- 需要更多食物资源

**对话风格**:
- "这个味道...真是绝妙!"
- "简单的食材也能做出美味~"
- "我饿了...想吃点好吃的"

**特殊交互**:
- 供奉食物时会犹豫 (太好吃了舍不得)
- 解锁隐藏食谱概率 +50%

---

#### 特质4: 虔诚者 🙏

**描述**: 天生对造物主充满信仰,渴望通过供奉表达敬意

**数值影响**:
- 初始虔诚度: 80 (普通60)
- 虔诚度衰减速度 -50%
- 供奉意愿阈值: 70 → 60 (更早触发)
- 祈祷速度 +20%

**行为影响**:
- 收获后优先考虑供奉而非食用/出售
- 每天至少前往祭坛1次 (即使不供奉)
- 更频繁地祈求神谕
- 目睹神迹后快乐度提升更多

**适合玩法**:
- 强化供奉-赐福循环
- 神力点数获取更快
- 关系建立更深

**对话风格**:
- "感谢造物主的恩赐"
- "我想将这份收获供奉给您"
- "您的旨意就是我的指引"

**特殊交互**:
- 如果长期不接受供奉,痛苦程度更深
- 信仰危机更难触发,但一旦触发更难恢复

---

#### 特质5: 工作狂 💼

**描述**: 沉浸于工作,追求效率和成就

**数值影响汇总**:
- 所有工作速度 +20%
- 工作时疲劳度增长 +15%
- 快乐度来源: 完成任务/收获 +30%
- 快乐度来源: 休闲活动 -20%

**详细数值计算表**:

| 影响项目 | 基础值 | 修正方式 | 工作狂修正后 | 计算示例 |
|---------|-------|---------|------------|---------|
| **种植速度** | 60秒 | 乘法×1.2 | 50秒 | 60 ÷ 1.2 = 50秒 |
| **收获速度** | 30秒 | 乘法×1.2 | 25秒 | 30 ÷ 1.2 = 25秒 |
| **钓鱼速度** | 120秒 | 乘法×1.2 | 100秒 | 120 ÷ 1.2 = 100秒 |
| **烹饪速度** | 180秒 | 乘法×1.2 | 150秒 | 180 ÷ 1.2 = 150秒 |
| **制作速度** | 240秒 | 乘法×1.2 | 200秒 | 240 ÷ 1.2 = 200秒 |
| **任务执行速度** | 300秒 | 乘法×1.2 | 250秒 | 300 ÷ 1.2 = 250秒 |

| 疲劳消耗 | 基础值 | 修正方式 | 工作狂修正后 | 说明 |
|---------|-------|---------|------------|------|
| **工作1小时疲劳** | -15点 | 乘法×1.15 | -17.25点 | 工作更累 |
| **种植一次** | -2点 | 乘法×1.15 | -2.3点 | 每次操作都多消耗 |
| **任务执行** | -10点 | 乘法×1.15 | -11.5点 | 任务完成累但满足 |

| 快乐度来源 | 基础值 | 修正方式 | 工作狂修正后 | 说明 |
|----------|-------|---------|------------|------|
| **完成任务** | +10点 | 乘法×1.3 | +13点 | 成就感强 |
| **收获作物** | +5点 | 乘法×1.3 | +6.5点 | 劳动成果喜悦 |
| **成功钓鱼** | +3点 | 乘法×1.3 | +3.9点 | 工作成果满意 |
| **散步休闲** | +8点 | 乘法×0.8 | +6.4点 | 休闲快乐降低 |
| **观景发呆** | +6点 | 乘法×0.8 | +4.8点 | 觉得浪费时间 |
| **玩耍娱乐** | +10点 | 乘法×0.8 | +8点 | 不如工作有成就感 |

**影响范围明细**:

工作速度加成适用于以下活动（完整列表）:
- ✅ 种植、浇水、施肥
- ✅ 收获作物
- ✅ 钓鱼
- ✅ 烹饪、制作
- ✅ 任务执行
- ✅ 采集资源
- ✅ 建造与维护
- ❌ 不适用：学习工具书（学习不受影响）
- ❌ 不适用：睡眠恢复（休息不受影响）

**行为影响**:
- 优先选择工作行为 (种植、钓鱼、任务)
- 休息意愿降低,可能过度劳累
- 完成任务后成就感更强
- 发呆/散步等休闲行为频率降低

**适合玩法**:
- 高产出,资源获取快
- 需要玩家关注健康度,避免过劳
- 任务系统体验更好

**对话风格**:
- "还有好多工作要做!"
- "完成了!下一个任务是什么?"
- (累到极限) "我...还能继续..."

**特殊交互**:
- 强制休息(神力祝福)时会表现出不情愿
- 容易触发"过劳"负面状态
- 解锁成就"勤劳之星"更容易

**数值设计理念**:
- ✅ 工作效率提升显著（20%），体现特质价值
- ⚠️ 疲劳增长增加（15%），需要玩家关注健康
- ⚖️ 快乐度来源转移：工作获得更多快乐，休闲快乐降低
- 🎯 总体平衡：高产出的代价是需要更多休息管理

---

#### 特质6: 佛系 ☮️

**描述**: 随遇而安,不追求效率,享受生活本身

**数值影响**:
- 所有需求衰减速度 -30% (饥饿、疲劳、快乐)
- 所有工作速度 -10%
- 压力值(如果实现)永远为0
- 快乐度基础值 +10

**行为影响**:
- 更多时间用于休闲活动 (散步、观景、发呆)
- 不会强迫自己工作
- 任务失败不沮丧
- 经常出现"静坐冥想"行为

**适合玩法**:
- 真正的挂机体验
- 观赏性优先
- 适合佛系玩家

**对话风格**:
- "慢慢来就好~"
- "今天的天气真好呢"
- "失败了也没关系,明天再试"

**特殊交互**:
- 几乎不会陷入危机 (需求降低慢)
- 产出低但稳定
- 与"工作狂"冲突

---

#### 特质7: 完美主义者 ✨

**描述**: 追求完美,不允许失败

**数值影响**:
- 任务成功率 +15%
- 作物"完美品质"概率 +20%
- 任务执行时间 +10% (更谨慎)
- 失败后快乐度惩罚 ×1.5

**行为影响**:
- 只接受成功率高的任务 (>80%)
- 工作前会"检查"(特殊动画)
- 失败后会多次重试,不轻易放弃
- 完成完美任务后极度开心

**适合玩法**:
- 高质量产出
- 任务成功率高
- 需要安抚失败后的情绪

**对话风格**:
- "一定要做到最好!"
- (成功) "这才是完美的成果!"
- (失败) "不...怎么会失败..."

---

#### 特质8: 幸运儿 🍀

**描述**: 天生好运,经常有意外之喜

**数值影响**:
- 所有随机事件好结果概率 +20%
- 稀有鱼捕获概率 +10%
- 宝箱发现概率 +25%
- 作物突变为特殊品种概率 +15%

**行为影响**:
- 更愿意尝试概率性活动 (钓鱼、探索)
- 获得稀有物品后会炫耀 (特殊动画)
- 随机事件触发频率 +10%

**适合玩法**:
- 高稀有度收集
- 意外惊喜多
- 运气向玩法

**对话风格**:
- "哇!又钓到稀有鱼了!"
- "今天运气真好~"
- "说不定会有好事发生呢"

**特殊交互**:
- 流星雨天气出现时,必定触发许愿事件
- 商人来访时,可能有特殊折扣

---

#### 特质9: 社交达人 🎭

**描述**: 喜欢与NPC互动,享受社交乐趣

**数值影响**:
- 与NPC互动时快乐度 +15
- 商人好感度提升速度 +30%
- 对话选项更丰富
- 独处时快乐度衰减稍快 +5%

**行为影响**:
- NPC来访时优先前往互动
- 更频繁使用"漂流瓶"(如果实现)
- 会主动寻找小动物NPC互动
- 玩家不在线时会"想念"玩家

**适合玩法**:
- 社交系统体验更好
- 商人交易有优势
- 未来多桌宠系统的核心

**对话风格**:
- "有客人来了!好开心!"
- "今天见到了新朋友~"
- "好久没人来了...有点寂寞"

---

#### 特质10: 好奇宝宝 🔍

**描述**: 对世界充满好奇,喜欢探索未知

**数值影响**:
- 探索系统(如果实现)效率 +25%
- 学习新技能速度 +20%
- 书籍阅读速度 +15%
- 体力消耗 +10% (探索很累)

**行为影响**:
- 优先探索未知区域 (迷雾)
- 发现新事物时极度兴奋
- 更愿意尝试新配方、新工具
- 经常"研究"物品 (查看、思考)

**适合玩法**:
- 探索向玩法
- 图书馆系统深度体验
- 解锁新内容更快

**对话风格**:
- "这是什么?好想研究一下!"
- "原来还有这种东西!"
- "世界真奇妙~"

---

### 2.3 特质分配机制

#### 2.3.1 出生时分配

**分配规则**:
- 从10个可用特质中随机选择2-3个
- 70%概率获得2个特质，30%概率获得3个特质
- 冲突特质不能同时出现（如早起者vs夜猫子、工作狂vs佛系）
- 每个特质只能拥有一次

**冲突组设定**:
- 冲突组1: 早起者 ↔ 夜猫子（互斥）
- 冲突组2: 工作狂 ↔ 佛系（互斥）

#### 2.3.2 特质组合示例

**组合A: 早起工作狂** (`early_bird` + `workaholic`)
- 特点: 早上效率极高,产出最大化
- 风险: 容易过劳,需要玩家关注健康
- 体验: 快节奏,高产出,适合效率玩家

**组合B: 夜猫虔诚者** (`night_owl` + `devout`)
- 特点: 夜间供奉仪式特别神圣
- 风险: 白天低效
- 体验: 独特的夜间游戏体验

**组合C: 佛系美食家** (`easygoing` + `foodie`)
- 特点: 慢节奏,享受烹饪和品尝
- 风险: 产出低,需要更多食物
- 体验: 治愈系,观赏性强

**组合D: 幸运完美主义** (`lucky` + `perfectionist`)
- 特点: 高品质+高稀有度,极品产出
- 风险: 失败会很难受
- 体验: 追求极致,收集向玩家最爱

---

### 2.4 特质对AI决策的影响

**AI决策权重调整机制**:

特质会影响桌宠对不同行为的偏好程度，通过修改行为的效用值来实现：

**工作狂特质影响**:
- 工作类行为权重 +30%
- 休闲类行为权重 -30%

**佛系特质影响**:
- 休闲类行为权重 +40%
- 压力类行为权重 -40%

**虔诚者特质影响**:
- 供奉行为权重 +50%
- 前往祭坛行为权重 +20%

**早起者特质影响**:
- 清晨工作行为权重 +50%
- 夜晚工作行为权重 -40%

**其他特质依此类推**，每个特质都有对应的行为权重修正表。

---

## 三、后天特性系统 (MVP v2.0+)

### 3.1 特性解锁机制

后天特性通过特定条件解锁,数量不限,累积效果。

**特性1: 勤劳**
- 解锁条件: 连续工作7天,每天工作时间>6游戏小时
- 效果: 工作速度永久 +10%
- 图标: 汗水徽章

**特性2: 虔诚信徒**
- 解锁条件: 连续供奉30天
- 效果: 供奉转化率永久 +15%
- 图标: 圣光光环

**特性3: 效率专家**
- 解锁条件: 完成100个任务
- 效果: 任务执行时间永久 -20%
- 图标: 齿轮徽章

**特性4: 多面手**
- 解锁条件: 所有技能达到Lv5+
- 效果: 可以同时处理2个任务
- 图标: 多彩星星

**特性5: 造物主之宠**
- 解锁条件: 虔诚度保持100持续7天
- 效果: 所有神力效果 +20%
- 图标: 神印

**特性6: 坚韧**
- 解锁条件: 在"自然法则派"模式下生存30天
- 效果: 所有需求衰减 -10%, 自主性+20%
- 图标: 盾牌

### 3.2 特性显示

**桌宠信息面板显示示例**:

**基本信息**:
- 名称: 小桌宠
- 年龄: 45天 (青年期)

**初始特质**:
- 🌅 早起者
- 💼 工作狂

**后天特性**:
- 💪 勤劳
- 🙏 虔诚信徒
- ⚙️ 效率专家

**性格倾向**: 独立型 (65%)

---

## 四、实现要点

### 4.1 数据结构

**桌宠个性数据组成**:

**基础信息**:
- 桌宠ID（唯一标识）
- 桌宠名称
- 出生日期

**特质系统**:
- 初始特质列表（固定2-3个）
- 后天特性列表（累积获得，无上限）
- 特质数值缓存（用于性能优化）
  - 综合工作速度修正值
  - 饥饿度衰减修正值
  - 虔诚度衰减修正值
  - 其他修正值...

**性格演化数据**（详见31-情感与记忆系统）:
- 依赖型倾向值（0-100）
- 独立型倾向值（0-100）
- 虔诚型倾向值（0-100）
- 平衡型倾向值（0-100）

### 4.2 特质效果应用

**特质效果应用机制**:

系统会按以下顺序叠加所有特质的修正效果：
1. 从基础数值开始
2. 依次应用所有初始特质的修正
3. 依次应用所有后天特性的修正
4. 得到最终数值

**特质修正值示例**:

**早起者特质**:
- 清晨工作速度: ×1.3
- 夜晚工作速度: ×0.8

**工作狂特质**:
- 工作速度: ×1.2
- 疲劳增长: ×1.15

**美食家特质**:
- 饥饿度衰减: ×1.2
- 食物满足度: ×1.3
- 烹饪经验获取: ×1.25

**特质冲突检查**:
- 早起者 ↔ 夜猫子（互斥）
- 工作狂 ↔ 佛系（互斥）

其他特质依此类推，每个特质都有详细的修正值映射表。

### 4.3 UI显示

**特质提示框显示内容**:

每个特质的提示框应包含以下信息：
- 特质图标和名称
- 特质描述文字
- 正面效果列表（用+号标识）
- 负面效果列表（用-号标识）

**示例 - 早起者特质提示框**:
```
🌅 早起者
早晨精力充沛,是一天中最有效率的时段

+ 清晨工作效率+30%
- 夜晚工作效率-20%
```

所有特质都采用相同的显示格式，便于玩家快速了解特质效果。

---

## 五、测试验证

### 5.1 功能测试

**测试用例1: 特质分配**

**前置条件**: 新建桌宠

**执行步骤**:
1. 创建10个桌宠
2. 检查每个桌宠的特质

**预期结果**:
- ✅ 每个桌宠有2-3个初始特质
- ✅ 没有冲突特质同时出现
- ✅ 特质分布相对均匀

**测试用例2: 早起者特质效果**

**前置条件**:
- 桌宠拥有"早起者"特质
- 游戏时间: 早上7:00

**执行步骤**:
1. 让桌宠种植作物
2. 记录完成时间: T1
3. 等待到晚上21:00
4. 让桌宠种植相同作物
5. 记录完成时间: T2

**预期结果**:
- ✅ T1 ≈ T2 × 0.77 (早上快30%,晚上慢20%)
- ✅ 早上桌宠更愿意工作 (AI决策)
- ✅ 晚上桌宠倾向于休息

**测试用例3: 特质组合效果**

**前置条件**:
- 桌宠A: 早起者 + 工作狂
- 桌宠B: 无特殊特质
- 游戏时间: 早上7:00

**执行流程**:
- 两个桌宠同时开始工作

**预期结果**:
- 桌宠A工作速度 = 基础 × 1.3 (早起) × 1.2 (工作狂) = 1.56倍
- ✅ 桌宠A效率显著高于桌宠B

### 5.2 平衡性测试

**测试目标**: 确保没有"必选"特质,所有特质都有价值

**测试方法**:
1. 创建10个桌宠,不同特质组合
2. 让它们在相同条件下生活30游戏天
3. 记录各项产出和状态

**评估指标**:
- 总产出差异 <30% (避免某组合过强)
- 快乐度均值差异 <20%
- 每个特质都有明显影响

---

## 六、未来扩展

### 6.1 更多特质
- **勇敢**: 探险时不害怕,探索效率+30%
- **谨慎**: 危险感知强,很少受伤,但探索慢
- **创造力**: 艺术创作品质+25%
- **领导力**: 多桌宠系统中效率加成

### 6.2 特质进化
- 特质可以"升级": 早起者 → 晨光之子 (效果更强)
- 需要特定条件: 连续30天保持早起习惯

### 6.3 特质组合技
- 特定特质组合解锁特殊能力
- 例如: 虔诚者+完美主义 = 圣徒 (供奉仪式更庄重)

---

## 七、总结

个性化系统让每个桌宠都成为独一无二的个体,大大增强玩家的情感投入和长期可玩性。

**核心设计**:
- ✅ 10个初始特质,平衡且有特色
- ✅ 特质既影响数值也影响行为
- ✅ 特质之间有协同和冲突
- ✅ 后天特性提供长期目标

**实现优先级**:
- P0 (MVP v1.5): 8-10个初始特质,分配系统
- P1 (MVP v2.0): 4-6个后天特性
- P2 (MVP v3.0+): 特质进化,组合技

---

**每个桌宠都是独一无二的伙伴 🌟**
