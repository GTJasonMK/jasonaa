---
文档编号: 31
文档名称: 情感与记忆系统
版本: 1.0
最后更新: 2025-10-28
---

# 情感与记忆系统

## 文档元信息
- **所属类别**: 扩展系统
- **依赖系统**: [桌宠AI与需求系统](../10-核心系统/11-桌宠AI与需求系统.md)、[关系系统](32-关系系统.md)
- **相关文档**: [个性化系统](30-个性化系统.md)、[生命阶段系统](33-生命阶段系统.md)

## 相关文档链接
- **上级文档**: [项目总览与导航](../00-规划/00-项目总览与导航.md)
- **同级文档**: [个性化系统](30-个性化系统.md)、[关系系统](32-关系系统.md)
- **下级文档**: 无

---

## 1. 系统概述

### 1.1 设计目标
情感与记忆系统赋予桌宠"灵魂"和"经历",让它们不再是简单的程序,而是有情感、有记忆的虚拟生命。通过积累经历、形成记忆、产生情感,桌宠能够展现出更真实、更有深度的个性。

### 1.2 核心价值
- **情感真实性**: 桌宠会根据经历产生真实的情感反应
- **记忆延续性**: 重要事件会被记住并影响未来行为
- **个性深化**: 情感和记忆让每个桌宠的个性更加立体
- **玩家联结**: 共同的记忆增强玩家与桌宠的情感纽带

### 1.3 系统特点
- **动态情感模型**: 情感会随事件变化,有波动和恢复
- **选择性记忆**: 根据情感强度和重要性筛选记忆
- **情感影响决策**: 当前情感状态会影响AI决策
- **记忆影响性格**: 长期记忆会逐渐塑造性格特质

---

## 2. 情感系统详细设计

### 2.1 情感模型

#### 2.1.1 基础情感维度
**情感空间六维模型**:

**快乐度 (Joy)**: 0-100
- 影响因素: 娱乐活动、社交互动、愿望达成

**悲伤度 (Sadness)**: 0-100
- 影响因素: 需求未满足、失败经历、失去朋友

**愤怒度 (Anger)**: 0-100
- 影响因素: 受到阻碍、不公平对待、期望落空

**恐惧度 (Fear)**: 0-100
- 影响因素: 未知事物、危险情况、健康威胁

**信任度 (Trust)**: 0-100
- 影响因素: 与玩家互动质量、承诺兑现

**期待度 (Anticipation)**: 0-100
- 影响因素: 即将发生的事件、节日临近

#### 2.1.2 复合情感状态

**复合情感计算规则**:

两种基础情感可以组合产生复合情感（取两者平均值，上限100）：

- **爱** = (快乐 + 信任) / 2
- **乐观** = (快乐 + 期待) / 2
- **绝望** = (悲伤 + 恐惧) / 2
- **进取** = (愤怒 + 期待) / 2
- **臣服** = (信任 + 恐惧) / 2
- **嫉妒** = (悲伤 + 愤怒) / 2

### 2.2 情感动态机制

#### 2.2.1 情感变化公式
**情感变化计算公式**:
```
新情感值 = 当前情感值 + (事件影响值 × 性格系数) - 自然衰减
```

**参数说明**:
- **事件影响值**: -30 到 +30
- **性格系数**: 0.5 到 2.0 (取决于性格特质)
- **自然衰减**: 每小时恢复 1-5 点(向基础值靠拢)

#### 2.2.2 情感波动示例

**配置数据(待重构):**

**常见事件情感影响表**:

| 事件类型 | 快乐度 | 悲伤度 | 愤怒度 | 恐惧度 | 信任度 | 期待度 |
|---------|--------|--------|--------|--------|--------|--------|
| 获得喜欢的食物 | +15 | - | - | - | +5 | - |
| 完成困难任务 | +20 | - | - | - | - | +10 |
| 被玩家责骂 | - | +10 | - | +5 | -15 | - |
| 朋友离开 | -20 | +25 | - | - | - | - |
| 获得稀有物品 | +25 | - | - | - | - | +15 |
| 供奉被接受 | +10 | - | - | - | +8 | - |
| 生病 | - | +15 | - | +10 | - | - |
| 节日庆祝 | +20 | - | - | - | - | +15 |

#### 2.2.3 情感衰减机制
**情感恢复特性**:

- **快乐度**: 向60-70基础值衰减,速率3点/小时
- **悲伤度**: 向20-30基础值衰减,速率2点/小时
- **愤怒度**: 快速衰减向10以下,速率5点/小时
- **恐惧度**: 中速衰减向20以下,速率3点/小时
- **信任度**: 缓慢衰减,速率1点/小时,仅向下
- **期待度**: 事件发生后快速归零,否则缓慢衰减

### 2.3 情感对行为的影响

#### 2.3.1 情感-行为映射

**情感状态对行为的影响**:

**高快乐度(>70)**:
- 行为倾向: 社交、探索、娱乐
- 抑制行为: 休息、独处
- 表情: 微笑
- 动画: 开心跳跃

**高悲伤度(>60)**:
- 行为倾向: 独处、休息、哭泣
- 抑制行为: 社交、娱乐
- 表情: 悲伤
- 动画: 伤心坐下

**高愤怒度(>50)**:
- 行为倾向: 发泄、独处、运动
- 抑制行为: 社交、学习
- 表情: 生气
- 动画: 跺脚

**高恐惧度(>50)**:
- 行为倾向: 躲藏、寻求庇护
- 抑制行为: 探索、冒险
- 表情: 害怕
- 动画: 发抖

**高信任度(>80)**:
- 行为倾向: 互动、供奉、请求帮助
- 表情: 信任
- 特殊: 更容易接受玩家建议

**高期待度(>70)**:
- 行为倾向: 准备、等待、频繁查看
- 表情: 兴奋
- 动画: 兴奋四处张望

#### 2.3.2 情感阈值与特殊行为
**情感极端状态触发机制**:

**极度快乐 (>90)**:
- 触发特殊动画: 跳跃旋转、欢呼
- 主动分享喜悦(对话气泡)
- 工作效率+20%

**极度悲伤 (>80)**:
- 触发哭泣动画
- 拒绝部分活动
- 工作效率-30%
- 可能触发"安慰"任务

**极度愤怒 (>80)**:
- 触发摔东西动画
- 拒绝互动
- 需要冷静时间(30分钟)

**极度恐惧 (>80)**:
- 躲到角落
- 发抖不停
- 需要玩家安抚

**信任崩溃 (<20)**:
- 拒绝供奉
- 减少互动
- 需要长期修复关系

**极度期待 (>85)**:
- 坐立不安
- 频繁询问
- 无法专注其他活动

---

## 3. 记忆系统详细设计

### 3.1 记忆分类

#### 3.1.1 记忆类型层次
**记忆系统架构**:

**短期记忆 (Short-term Memory)**:
- **容量**: 最多20条
- **保留时间**: 1-3天
- **内容**: 近期事件、临时想法

**工作记忆 (Working Memory)**:
- **容量**: 5-7条
- **保留时间**: 当前活动期间
- **内容**: 当前任务相关信息

**长期记忆 (Long-term Memory)**:
- **容量**: 无限(实际限制100条重要记忆)
- **保留时间**: 永久(除非被遗忘机制清除)
- **分类**:
  - **情节记忆**: 特定事件(首次相遇、重要节日)
  - **语义记忆**: 知识和概念(喜好、规则)
  - **程序记忆**: 技能和习惯(如何做事)

**闪光记忆 (Flashbulb Memory)**:
- **容量**: 5-10条
- **触发条件**: 极端情感(>85)或重大事件
- **特点**: 细节丰富、难以遗忘、经常回忆

#### 3.1.2 记忆数据结构

**记忆对象包含的信息**:

**基础属性**:
- 记忆ID（唯一标识）
- 记忆类型（情节/语义/程序/闪光）
- 时间戳

**记忆内容**:
- 事件名称
- 详细描述
- 发生地点
- 参与者列表
- 相关物品列表

**情感标签**:
- 各维度情感数值（快乐、恐惧、期待等）
- 主导情感类型

**记忆强度**:
- 强度值（0-100，决定遗忘速度）
- 重要性等级（1-10，主观重要性）

**访问统计**:
- 被回忆次数
- 最后访问时间

**关联信息**:
- 相关记忆ID列表
- 相关实体列表

**记忆状态**:
- 当前状态（工作中/短期/巩固/衰退）
- 每日衰减速率

### 3.2 记忆形成机制

#### 3.2.1 记忆编码条件
**事件是否形成记忆的判断标准**:

**必定形成记忆的事件**:
- 首次经历(第一次见面、第一次供奉)
- 情感强度>70的事件
- 玩家直接参与的互动
- 完成重要任务/成就