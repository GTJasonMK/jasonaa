# 03-开发路线图

> **文档版本**: v1.0
> **最后更新**: 2025-10-27
> **负责人**: 待定
> **优先级**: ⭐⭐⭐⭐⭐ (必读)

---

## 📋 相关文档

**前置依赖**:
- [00-项目总览与导航](./00-项目总览与导航.md)
- [02-游戏概念文档](./02-游戏概念文档.md)

**相关文档**:
- [04-版本功能清单](./04-版本功能清单.md)

---

## 一、开发时间线总览

```
总开发周期: 15周 (约4个月)

Week 1-2   ████░░░░░░░░░░░   框架搭建
Week 3-7   ░░░░█████░░░░░░   MVP v1.0 - 基础游戏
Week 8-9   ░░░░░░░░░██░░░░   MVP v1.5 - 个性化
Week 10-12 ░░░░░░░░░░░███░   MVP v2.0 - 任务系统
Week 13-15 ░░░░░░░░░░░░░██   MVP v2.5 - 深度扩展
Week 16+   ░░░░░░░░░░░░░░░   MVP v3.0+ - 持续迭代
```

---

## 二、详细开发计划

### 🏗️ 第一阶段: 核心框架 (Week 1-2)

**开发目标**: 建立稳定的技术基础

#### Week 1: 技术选型与框架搭建
**开发任务**:
- [ ] 技术栈最终确定 (Electron/Unity/Godot)
- [ ] 项目初始化,目录结构设计
- [ ] 开发环境配置 (IDE, 工具链, Git)
- [ ] 基础渲染框架 (Canvas/引擎初始化)
- [ ] 窗口管理 (桌面悬浮窗,置顶,拖动)

**技术文档**:
- [51-架构设计](../50-技术实现/51-架构设计.md)
- [50-数据结构设计](../50-技术实现/50-数据结构设计.md)

**验收标准**:
- ✅ 项目可以正常运行
- ✅ 能渲染简单图形
- ✅ 窗口可以拖动、置顶

---

#### Week 2: 核心系统框架
**开发任务**:
- [ ] 时间系统基础实现 (游戏时间流逝)
- [ ] 事件系统 (发布-订阅模式)
- [ ] 状态管理系统 (桌宠状态, 世界状态)
- [ ] 存档系统基础 (Save/Load)
- [ ] 简单的场景渲染 (静态背景)
- [ ] 桌宠基础移动 (行走动画,场景切换)

**技术文档**:
- [12-时间与天气系统](../10-核心系统/12-时间与天气系统.md)
- [51-架构设计](../50-技术实现/51-架构设计.md)

**验收标准**:
- ✅ 游戏时间正常流逝 (1秒=1分钟)
- ✅ 桌宠能在屏幕上移动
- ✅ 能保存和读取简单数据

---

### 🎮 第二阶段: MVP v1.0 - 基础游戏 (Week 3-7)

**版本目标**: 验证核心玩法 - 供奉-赐福循环

---

#### Week 3: 场景系统
**开发任务**:
- [ ] 实现4个基础场景渲染 (田、池塘、家、祭坛)
- [ ] 场景切换逻辑
- [ ] 田地系统: 土地状态、种植点位
- [ ] 池塘系统: 水质状态、钓鱼点
- [ ] 家系统: 休息区、仓库UI
- [ ] 祭坛系统: 供奉台渲染

**设计文档**:
- [10-场景系统](../10-核心系统/10-场景系统.md)

**验收标准**:
- ✅ 4个场景可以正常切换
- ✅ 每个场景有基本的交互点
- ✅ 场景美术资源到位 (可用占位图)

---

#### Week 4: 需求与AI系统
**开发任务**:
- [ ] 实现5大需求系统 (饥饿、疲劳、快乐、健康、虔诚)
- [ ] 需求自然衰减逻辑
- [ ] AI决策框架 (效用理论/行为树)
- [ ] 基础行为实现:
  - 种植行为
  - 浇水行为
  - 睡觉行为
  - 进食行为
- [ ] 行为优先级系统

**设计文档**:
- [11-桌宠AI与需求系统](../10-核心系统/11-桌宠AI与需求系统.md)
- [52-AI实现方案](../50-技术实现/52-AI实现方案.md)

**验收标准**:
- ✅ 桌宠会根据需求自主决策
- ✅ 饿了找食物,累了去睡觉
- ✅ 行为转换自然流畅

---

#### Week 5: 农业与资源系统
**开发任务**:
- [ ] 作物系统: 3种作物 (萝卜、白菜、小麦)
- [ ] 作物生长逻辑 (阶段变化,时间计算)
- [ ] 钓鱼系统: 3种鱼 (小鱼、鲫鱼、金鱼)
- [ ] 钓鱼机制 (概率计算,时间消耗)
- [ ] 物品系统: 基础物品类,属性定义
- [ ] 仓库系统: 物品存储、堆叠
- [ ] 资源显示UI

**设计文档**:
- [10-场景系统](../10-核心系统/10-场景系统.md#田地)
- [10-场景系统](../10-核心系统/10-场景系统.md#池塘)
- [13-资源与经济系统](../10-核心系统/13-资源与经济系统.md)

**验收标准**:
- ✅ 作物可以种植、生长、收获
- ✅ 钓鱼可以捕获不同的鱼
- ✅ 物品正确存储在仓库

---

#### Week 6: 供奉系统 (核心创新)
**开发任务**:
- [ ] 供奉决策AI (何时供奉,供奉什么)
- [ ] 供奉行为流程:
  - 选择物品
  - 前往祭坛
  - 放置物品
  - 祈祷动画
- [ ] 玩家供奉界面UI:
  - 显示供奉物品
  - 显示可获得神力点数
  - 三个按钮: 接受/拒绝/赐福
- [ ] 神力点数系统
- [ ] 供奉转化计算 (加成、虔诚度影响)
- [ ] 神迹动画 (光芒、粒子特效)

**设计文档**:
- [14-供奉系统](../10-核心系统/14-供奉系统.md)
- [13-资源与经济系统](../10-核心系统/13-资源与经济系统.md#供奉机制)

**验收标准**:
- ✅ 桌宠会主动进行供奉
- ✅ 玩家可以选择接受/拒绝
- ✅ 神力点数正确累积
- ✅ 供奉后有反馈动画

---

#### Week 7: 天气与神力系统
**开发任务**:
- [ ] 天气系统实现:
  - 天气类型: 晴天、雨天、阴天
  - 天气效果: 视觉、数值影响
  - 天气自然转换
- [ ] 神力系统实现:
  - 召唤雨水 (50神力)
  - 驱散乌云 (30神力)
  - 引发彩虹 (100神力)
  - 健康祝福 (50神力)
  - 能量祝福 (40神力)
- [ ] 神力UI面板
- [ ] 基础UI完善

**设计文档**:
- [12-时间与天气系统](../10-核心系统/12-时间与天气系统.md)
- [16-神力系统](../10-核心系统/16-神力系统.md)

**验收标准**:
- ✅ 天气正常转换并影响游戏
- ✅ 玩家可以使用神力
- ✅ 神力效果正确生效
- ✅ UI可以显示所有核心信息

**🎯 MVP v1.0 里程碑验收**:
- ✅ 桌宠能自主生活7天以上无崩溃
- ✅ 供奉-赐福循环完整运行
- ✅ 玩家愿意持续观察 (内部测试反馈)

---

### ✨ 第三阶段: MVP v1.5 - 个性化强化 (Week 8-9)

**版本目标**: 让每个桌宠独一无二

---

#### Week 8: 个性化系统
**开发任务**:
- [ ] 初始特质系统:
  - 定义8-10个特质
  - 特质对数值的影响
  - 特质对AI决策的影响
  - 出生时随机分配特质
- [ ] 三维关系系统:
  - 虔诚度 (已有,优化)
  - 亲密度 (新增)
  - 信任度 (新增)
  - 关系值影响机制
- [ ] 关系UI显示
- [ ] 特质描述UI

**设计文档**:
- [30-个性化系统](../30-扩展系统/30-个性化系统.md)
- [32-关系系统](../30-扩展系统/32-关系系统.md)

**验收标准**:
- ✅ 不同特质的桌宠行为明显不同
- ✅ 关系值正确影响互动
- ✅ 玩家能感知个体差异

---

#### Week 9: 细节与记忆
**开发任务**:
- [ ] 微表情系统:
  - 10+种表情动画
  - 根据需求/事件触发表情
- [ ] 天气细节效果:
  - 下雨: 撑伞、雨滴、水坑
  - 打雷: 吓一跳动画
  - 大风: 帽子被吹走
- [ ] 小动物NPC:
  - 2-3种小动物 (青蛙、蝴蝶、小鸟)
  - 简单的生态互动
- [ ] 记忆系统基础:
  - 记录重要事件 (首次、里程碑)
  - 记忆影响对话

**设计文档**:
- [31-情感与记忆系统](../30-扩展系统/31-情感与记忆系统.md)
- 微观细节 (参考扩展建议文档)

**验收标准**:
- ✅ 细节动画丰富生动
- ✅ 桌宠会"记住"重要事件
- ✅ 世界更有生命力

**🎯 MVP v1.5 里程碑验收**:
- ✅ 玩家能明显感受桌宠个性
- ✅ 细节增强了代入感
- ✅ 关系系统影响体验

---

### 💼 第四阶段: MVP v2.0 - 任务系统 (Week 10-12)

**版本目标**: 实现虚实结合,桌宠成为真正的助手

---

#### Week 10: 工作台与任务框架
**开发任务**:
- [ ] 工作台场景实现
- [ ] 任务数据结构设计
- [ ] 任务队列系统
- [ ] 任务UI面板:
  - 任务列表
  - 任务详情
  - 任务发布界面
- [ ] 任务状态机 (待接受→进行中→已完成)
- [ ] 任务接受AI决策

**设计文档**:
- [15-任务系统](../10-核心系统/15-任务系统.md)
- [56-MCP集成方案](../50-技术实现/56-MCP集成方案.md)

**验收标准**:
- ✅ 任务系统框架完整
- ✅ UI可以发布和查看任务
- ✅ 桌宠会根据状态接受任务

---

#### Week 11: MCP集成与任务执行
**开发任务**:
- [ ] MCP服务集成
- [ ] 实现5-8种基础任务:
  - 打开应用程序
  - 打开指定网页
  - 定时提醒
  - 查找文件
  - 批量重命名文件
- [ ] 任务执行器 (调用MCP工具)
- [ ] 任务执行动画 (桌宠在工作台工作)
- [ ] 任务成功/失败处理
- [ ] 安全控制基础

**设计文档**:
- [15-任务系统](../10-核心系统/15-任务系统.md#任务类型)
- [56-MCP集成方案](../50-技术实现/56-MCP集成方案.md)

**验收标准**:
- ✅ 所有任务类型可正常执行
- ✅ 执行成功率>95%
- ✅ 危险操作被正确拦截

---

#### Week 12: 技能系统与任务优化
**开发任务**:
- [ ] 任务技能系统:
  - 技能等级 (Lv1-10)
  - 技能影响成功率和效率
  - 经验值获取和升级
- [ ] 任务失败机制
- [ ] 任务奖励系统 (金币、经验、神力点数)
- [ ] 三重经济循环验证
- [ ] 性能优化和bug修复

**设计文档**:
- [17-成长与技能系统](../10-核心系统/17-成长与技能系统.md)
- [15-任务系统](../10-核心系统/15-任务系统.md#任务执行机制)

**验收标准**:
- ✅ 技能正确影响任务表现
- ✅ 三重循环流畅运转
- ✅ 任务系统稳定可靠

**🎯 MVP v2.0 里程碑验收**:
- ✅ 任务系统可靠且实用
- ✅ 玩家觉得任务有趣不枯燥
- ✅ 虚拟养成与现实助手平衡

---

### 🌟 第五阶段: MVP v2.5 - 深度扩展 (Week 13-15)

**版本目标**: 增加长期可玩性和深度

---

#### Week 13: 生命阶段与性格演化
**开发任务**:
- [ ] 生命阶段系统:
  - 幼年/青年/中年/老年
  - 各阶段外观变化
  - 各阶段属性差异
- [ ] 性格演化系统:
  - 4种性格类型 (依赖/独立/虔诚/平衡)
  - 性格影响行为和对话
  - 性格根据玩家互动演化
- [ ] 纪念日系统基础

**设计文档**:
- [33-生命阶段系统](../30-扩展系统/33-生命阶段系统.md)
- [31-情感与记忆系统](../30-扩展系统/31-情感与记忆系统.md#性格演化)

**验收标准**:
- ✅ 生命阶段正确切换
- ✅ 性格演化可感知
- ✅ 玩家在意桌宠成长

---

#### Week 14: 神力代价与新场景
**开发任务**:
- [ ] 神力代价系统:
  - 依赖度机制
  - 神力副作用
  - 游戏哲学选择
- [ ] 供奉系统深化:
  - 供奉仪式分级 (普通/稀有/传说)
  - 神谕系统基础
  - 圣物系统 (可选)
- [ ] 新场景实现:
  - 图书馆 (学习系统)
  - 工作坊 (进阶制作)
- [ ] 书籍和配方系统

**设计文档**:
- [34-神力代价与哲学](../30-扩展系统/34-神力代价与哲学.md)
- [14-供奉系统](../10-核心系统/14-供奉系统.md#供奉深化)
- [37-新场景扩展](../30-扩展系统/37-新场景扩展.md)

**验收标准**:
- ✅ 神力使用有策略性
- ✅ 供奉更有仪式感
- ✅ 新场景提供新玩法

---

#### Week 15: 优化与完善
**开发任务**:
- [ ] 全系统平衡性调整
- [ ] UI/UX优化
- [ ] 动画和特效完善
- [ ] 音效和背景音乐集成
- [ ] 性能优化
- [ ] Bug修复
- [ ] 内部测试和反馈收集

**验收标准**:
- ✅ 所有系统稳定运行
- ✅ 数值平衡合理
- ✅ 用户体验流畅

**🎯 MVP v2.5 里程碑验收**:
- ✅ 长期可玩性显著提升
- ✅ 玩家愿意长期留存
- ✅ 达到可发布alpha版本的质量

---

### 🚀 第六阶段: MVP v3.0+ - 持续迭代 (Week 16+)

**版本目标**: 根据用户反馈持续优化和扩展

**扩展方向**:
1. **梦境系统** (Week 16-17)
   - 梦境探索玩法
   - 噩梦驱散机制
   - 梦之碎片收集

2. **艺术创作系统** (Week 18-19)
   - 音乐创作
   - 绘画系统
   - 艺术节事件

3. **探索冒险** (Week 20-21)
   - 地图迷雾
   - 野外探险
   - 遗迹系统

4. **创世纪模式** (Week 22+)
   - 地形编辑
   - 物种创造
   - 世界法则

5. **社交功能** (待定)
   - 漂流瓶
   - 多桌宠互动
   - 社区分享

---

## 三、开发资源分配

### 人员配置建议

**最小团队 (1-2人)**:
- 1个全栈开发 + 1个美术/外包

**推荐团队 (3-4人)**:
- 1个前端/游戏开发
- 1个后端/系统集成
- 1个美术设计
- 1个游戏策划/测试

**理想团队 (5-6人)**:
- 2个游戏开发
- 1个美术设计
- 1个动画师
- 1个音效师
- 1个策划/测试

### 工作量估算

| 阶段 | 开发周 | 人天 (2人团队) | 主要工作 |
|------|--------|----------------|----------|
| 框架搭建 | 2周 | 20人天 | 技术基础 |
| MVP v1.0 | 5周 | 50人天 | 核心玩法 |
| MVP v1.5 | 2周 | 20人天 | 个性化 |
| MVP v2.0 | 3周 | 30人天 | 任务系统 |
| MVP v2.5 | 3周 | 30人天 | 深度扩展 |
| **总计** | **15周** | **150人天** | - |

---

## 四、风险管理

### 技术风险

**风险1: 技术选型错误**
- 概率: 中
- 影响: 高 (需要重写)
- 应对: Week 1-2充分验证原型,必要时及时切换

**风险2: MCP集成困难**
- 概率: 中
- 影响: 中 (影响任务系统)
- 应对: Week 10前研究MCP文档,准备备选方案(纯本地脚本)

**风险3: 性能问题**
- 概率: 低
- 影响: 中
- 应对: 从Week 1开始关注性能,定期profiling

### 设计风险

**风险4: 供奉系统不够有趣**
- 概率: 中
- 影响: 高 (核心玩法失败)
- 应对: Week 6完成后立即内部测试,v1.5深化供奉体验

**风险5: 任务系统不实用**
- 概率: 中
- 影响: 中
- 应对: Week 10前调研用户真实需求,设计实用任务

**风险6: 系统过于复杂**
- 概率: 低
- 影响: 中
- 应对: 严格按MVP范围开发,扩展功能可选

### 资源风险

**风险7: 美术资源不足**
- 概率: 高
- 影响: 中
- 应对: 前期使用占位图,v1.5后集中美术制作

**风险8: 开发周期延误**
- 概率: 高
- 影响: 中
- 应对: 每周review进度,必要时削减非核心功能

---

## 五、测试计划

### 测试阶段划分

**单元测试** (每周):
- 核心逻辑单元测试
- 覆盖率目标: 60%+

**集成测试** (每个MVP版本):
- 系统间交互测试
- 关键流程测试

**Alpha测试** (v2.5完成后):
- 内部团队测试
- 功能完整性验证
- 性能压力测试

**Beta测试** (v3.0+):
- 小范围用户测试
- 收集真实反馈
- 迭代优化

### 关键测试用例

**供奉循环测试**:
1. 桌宠在虔诚度<50时会主动供奉
2. 玩家接受供奉后神力点数正确增加
3. 神力点数可以正确消耗
4. 供奉后桌宠虔诚度和快乐度提升

**任务系统测试**:
1. 任务发布流程完整
2. 桌宠根据状态接受任务
3. 任务执行成功率符合预期
4. 任务奖励正确发放

**长期运行测试**:
1. 游戏连续运行7天无崩溃
2. 存档加载正确
3. 内存无泄漏

---

## 六、发布计划

### 版本发布节奏

```
Week 7:  MVP v1.0 - 内部Alpha
Week 9:  MVP v1.5 - 内部测试版
Week 12: MVP v2.0 - 封闭Beta
Week 15: MVP v2.5 - 公开Beta
Week 20+: v1.0正式版
```

### 发布检查清单

**技术层面**:
- [ ] 所有P0功能完整实现
- [ ] 关键bug已修复
- [ ] 性能达标 (CPU<10%, 内存<200MB)
- [ ] 多平台测试通过 (Win/Mac/Linux)

**内容层面**:
- [ ] 至少5种作物,5种鱼
- [ ] 10+种任务类型
- [ ] 20+个成就
- [ ] 完整的UI和动画

**体验层面**:
- [ ] 新手引导完善
- [ ] 核心循环流畅
- [ ] 无严重体验问题

---

## 七、总结

这份路线图规划了15周的核心开发工作,覆盖从框架搭建到MVP v2.5的全过程。关键里程碑:

- **Week 7**: 验证供奉-赐福循环 ⭐⭐⭐⭐⭐
- **Week 12**: 实现虚实结合 ⭐⭐⭐⭐
- **Week 15**: 达到可发布状态 ⭐⭐⭐⭐⭐

后续v3.0+的扩展内容可根据用户反馈和资源情况灵活调整。

**记住**: 这是一个有温度的工具,也是一个有用的游戏。保持核心体验纯粹,让每一个细节都服务于情感连接。

---

**祝开发顺利! 🚀**
